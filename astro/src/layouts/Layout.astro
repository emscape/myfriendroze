---
export interface Props {
  title?: string;
  description?: string;
}

const { title = 'myfriendroze', description = 'Handcrafted ceramic planters and carefully curated succulents from myfriendroze.' } = Astro.props;
---

<!doctype html>
<html class="no-js" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="theme-color" content="#f2efdd">
    <link rel="canonical" href="https://myfriendroze.com">
    <title>{title}</title>
    <meta name="description" content={description} />
    <meta name="keywords" content="succulents, cacti, ceramics, planters, handmade, myfriendroze" />
    <meta property="og:title" content="myfriendroze" />
    <meta property="og:description" content="Handcrafted ceramic planters and carefully curated succulents from myfriendroze." />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://myfriendroze.com" />

    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="/favicon.svg">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/favicon.png">
    <link rel="manifest" href="/site.webmanifest">

    <!-- Preconnect to fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Display:wght@400;500;600;700&display=swap" rel="stylesheet">

    <!-- Font preload for better performance -->
    <link rel="preload" href="https://fonts.gstatic.com/s/notosansdisplay/v26/RLpbK4fMKhaknNNJp0WCHxWB_JOB8VeV-HtjGbQhbw.woff2" as="font" type="font/woff2" crossorigin>

    <!-- Base CSS -->
    <link rel="stylesheet" href="/styles/global.css" />

    <!-- Scripts -->
    <script src="/scripts/constants.js" defer="defer"></script>
    <script src="/scripts/global.js" defer="defer"></script>
    
    <style>
      /* DD Succulents Design System */
      :root {
        --font-body-family: 'Noto Sans Display', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        --font-heading-family: 'Noto Sans Display', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        --font-body-scale: 1;
        --font-heading-scale: 1.2;

        /* DD Succulents Color Scheme */
        --color-background: #f2efdd;
        --color-background-2: #faf9e1;
        --color-foreground: #3d081b;
        --color-button: #acdc9e;
        --color-button-text: #f2efdd;
        --color-secondary-button-text: #3d081b;
        --color-shadow: #3d081b;
        --color-accent: #acdc9e;

        /* Layout */
        --page-width: 120rem;
        --spacing-sections: 6.4rem;
        --spacing-grid-horizontal: 1.2rem;
        --spacing-grid-vertical: 1.2rem;

        /* Border radius */
        --buttons-radius: 4rem;
        --inputs-radius: 1.2rem;
        --card-corner-radius: 1.2rem;
        --media-radius: 1.2rem;

        /* Shadows */
        --buttons-shadow-opacity: 0.9;
        --buttons-shadow-horizontal-offset: 0;
        --buttons-shadow-vertical-offset: 0.2rem;
        --buttons-shadow-blur: 0;
        --card-shadow-opacity: 1;
        --card-shadow-horizontal-offset: 0;
        --card-shadow-vertical-offset: 0.4rem;
        --card-shadow-blur: 0;
      }

      *,
      *::before,
      *::after {
        box-sizing: inherit;
      }

      /* Ensure Noto Sans Display loads properly on all devices */
      body,
      html {
        font-family: var(--font-body-family);
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
      }

      html {
        box-sizing: border-box;
        font-size: 62.5%;
        height: 100%;
      }

      html.no-js .no-js:not(html) {
        display: block !important;
      }

      .no-js:not(html) {
        display: none !important;
      }

      body {
        display: grid;
        grid-template-rows: auto auto 1fr auto;
        grid-template-columns: 100%;
        min-height: 100%;
        margin: 0;
        font-size: calc(1.5rem * var(--font-body-scale));
        letter-spacing: 0.06rem;
        line-height: calc(1 + 0.8 / var(--font-body-scale));
        font-family: var(--font-body-family);
        background-color: var(--color-background);
        color: var(--color-foreground);
      }

      @media screen and (min-width: 750px) {
        body {
          font-size: calc(1.6rem * var(--font-body-scale));
        }
      }

      .page-width {
        max-width: var(--page-width);
        margin: 0 auto;
        padding: 0 1.5rem;
      }

      @media screen and (min-width: 750px) {
        .page-width {
          padding: 0 5rem;
        }
      }
      
      /* Header styles */
      .site-header {
        position: relative;
        background-color: var(--color-background);
        border-bottom: 0.1rem solid rgba(var(--color-foreground), 0.08);
      }

      .header {
        padding: 1rem 0;
      }

      .header__wrapper {
        display: flex;
        align-items: center;
        justify-content: space-between;
        position: relative;
      }

      .header__heading {
        margin: 0;
      }

      .header__heading-logo {
        max-width: 100%;
        height: auto;
      }

      .header__heading-logo img {
        max-height: 3.5rem;
        width: auto;
      }

      .header__icons {
        display: flex;
        align-items: center;
        gap: 1rem;
      }

      .list-menu {
        display: flex;
        list-style: none;
        margin: 0;
        padding: 0;
        gap: 2rem;
      }

      .list-menu__item {
        display: flex;
        align-items: center;
      }

      .list-menu__item--link {
        text-decoration: none;
        color: var(--color-foreground);
        font-size: 1.4rem;
        padding: 1rem 0;
        line-height: calc(1 + 0.8 / var(--font-body-scale));
      }

      .list-menu__item--link:hover {
        text-decoration: underline;
      }
      
      /* Footer styles */
      .site-footer {
        background-color: var(--color-background);
        border-top: 0.1rem solid rgba(var(--color-foreground), 0.08);
        margin-top: var(--spacing-sections);
      }

      .footer {
        padding: 4rem 0 2rem;
      }

      .footer__content-top {
        display: flex;
        flex-direction: column;
        align-items: center;
        text-align: center;
        gap: 2rem;
      }

      .footer__content-bottom {
        display: flex;
        flex-direction: column;
        align-items: center;
        text-align: center;
        gap: 1rem;
        margin-top: 2rem;
        padding-top: 2rem;
        border-top: 0.1rem solid rgba(var(--color-foreground), 0.08);
      }

      .footer__list-social {
        display: flex;
        gap: 2rem;
        list-style: none;
        margin: 0;
        padding: 0;
      }

      .footer__list-social a {
        text-decoration: none;
        color: var(--color-foreground);
        font-size: 1.4rem;
      }

      .footer__list-social a:hover {
        text-decoration: underline;
      }

      /* Responsive styles */
      @media screen and (max-width: 749px) {
        .header__wrapper {
          flex-direction: column;
          gap: 1rem;
        }

        .list-menu {
          flex-wrap: wrap;
          justify-content: center;
          gap: 1rem;
        }

        .header__heading-logo img {
          max-height: 3rem;
        }
      }

      /* Utility classes */
      .visually-hidden {
        position: absolute !important;
        overflow: hidden;
        width: 1px;
        height: 1px;
        margin: -1px;
        padding: 0;
        border: 0;
        clip: rect(0 0 0 0);
        word-wrap: normal !important;
      }

      .skip-to-content-link {
        position: absolute;
        z-index: 9999;
        top: -4rem;
        left: 0.8rem;
        background-color: var(--color-button);
        color: var(--color-button-text);
        padding: 0.8rem 1.6rem;
        text-decoration: none;
        border-radius: var(--buttons-radius);
      }

      .skip-to-content-link:focus {
        top: 0.8rem;
      }

      /* Button styles */
      .button {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        padding: 1rem 2rem;
        background-color: var(--color-button);
        color: var(--color-button-text);
        text-decoration: none;
        border: 0.2rem solid transparent;
        border-radius: var(--buttons-radius);
        font-family: var(--font-body-family);
        font-size: 1.4rem;
        font-weight: 500;
        line-height: calc(1 + 0.2 / var(--font-body-scale));
        cursor: pointer;
        transition: all 0.2s ease;
        box-shadow: 0 var(--buttons-shadow-vertical-offset) var(--buttons-shadow-blur) rgba(var(--color-shadow), var(--buttons-shadow-opacity));
      }

      .button:hover {
        opacity: 0.85;
        transform: translateY(-0.1rem);
      }

      .button--secondary {
        background-color: transparent;
        color: var(--color-secondary-button-text);
        border-color: currentColor;
      }

      /* Form styles */
      .field__input {
        padding: 1rem 1.5rem;
        border: 0.2rem solid rgba(var(--color-foreground), 0.2);
        border-radius: var(--inputs-radius);
        background-color: var(--color-background);
        color: var(--color-foreground);
        font-family: var(--font-body-family) !important;
        font-size: 1.4rem;
        width: 100%;
      }

      .field__input:focus {
        border-color: var(--color-button);
        outline: none;
      }

      /* Font loading states and iOS-specific fixes */
      .fonts-loaded body,
      .fonts-loaded * {
        font-family: var(--font-body-family) !important;
      }

      /* Force Noto Sans Display on iOS Safari */
      @supports (-webkit-touch-callout: none) {
        body,
        * {
          font-family: 'Noto Sans Display', -apple-system, BlinkMacSystemFont, sans-serif !important;
        }
      }
    </style>
  </head>
  <body class="gradient">
    <a class="skip-to-content-link button visually-hidden" href="#MainContent">
      Skip to content
    </a>

    <!-- Header -->
    <header class="site-header">
      <slot name="header">
        <!-- Default header content -->
        <div class="header page-width">
          <div class="header__wrapper">
            <div class="header__heading">
              <a href="/" class="header__heading-logo">
                <img src="/dd-logo.png" alt="death's door store" width="600" height="auto" loading="lazy">
              </a>
            </div>

            <nav class="header__inline-menu">
              <ul class="list-menu list-menu--inline" role="list">
                <li><a href="/" class="list-menu__item list-menu__item--link">home</a></li>
                <li><a href="/shop" class="list-menu__item list-menu__item--link">shop</a></li>
                <li><a href="/gallery" class="list-menu__item list-menu__item--link">gallery</a></li>
                <li><a href="/story" class="list-menu__item list-menu__item--link">d.d. story</a></li>
                <li><a href="/contact" class="list-menu__item list-menu__item--link">contact us</a></li>
                <li><a href="/small-print" class="list-menu__item list-menu__item--link">the small print</a></li>
              </ul>
            </nav>

            <div class="header__icons">
              <a href="/search" class="header__icon header__icon--search">
                <span class="visually-hidden">Search</span>
              </a>
              <a href="/account" class="header__icon header__icon--account">
                <span class="visually-hidden">Log in</span>
              </a>
              <a href="/cart" class="header__icon header__icon--cart">
                <span class="visually-hidden">Cart</span>
              </a>
            </div>
          </div>
        </div>
      </slot>
    </header>
    
    <!-- Main Content -->
    <main id="MainContent" class="content-for-layout focus-none" role="main" tabindex="-1">
      <slot />
    </main>
    
    <!-- Footer -->
    <footer class="site-footer">
      <slot name="footer">
        <!-- Default footer content -->
        <div class="footer page-width">
          <div class="footer__content-top">
            <ul class="footer__list-social" role="list">
              <li>
                <a href="https://www.facebook.com/ddssucculents/" target="_blank" rel="noopener">
                  Facebook
                </a>
              </li>
              <li>
                <a href="https://www.instagram.com/ddssucculents/" target="_blank" rel="noopener">
                  Instagram
                </a>
              </li>
            </ul>
          </div>

          <div class="footer__content-bottom">
            <div class="footer__payment">
              <span class="visually-hidden">Payment methods</span>
              <div class="footer__payment-list">
                American Express • Apple Pay • Diners Club • Discover • Google Pay • Mastercard • PayPal • Shop Pay • Venmo • Visa
              </div>
            </div>
            <p class="footer__copyright">
              © 2025, <a href="/">death's door store</a>
            </p>
          </div>
        </div>
      </slot>
    </footer>
    <!-- Accessibility messages -->
    <ul hidden>
      <li id="a11y-refresh-page-message">Refresh page</li>
      <li id="a11y-new-window-message">Opens in new window</li>
    </ul>
    
    <!-- Font loading optimization -->
    <script>
      // Ensure font loads properly on iOS and other devices
      if ('fonts' in document) {
        document.fonts.load('400 16px "Noto Sans Display"').then(() => {
          document.documentElement.classList.add('fonts-loaded');
        });
      }
    </script>

    <!-- Site configuration -->
    <script>
      // Remove no-js class when JavaScript is available
      document.documentElement.classList.remove('no-js');

      // Site configuration
      window.siteConfig = {
        siteName: 'myfriendroze',
        siteUrl: 'https://myfriendroze.com',
        routes: {
          home: '/',
          shop: '/shop',
          gallery: '/gallery',
          story: '/story',
          contact: '/contact',
          smallPrint: '/small-print',
        }
      };

      // Accessibility strings
      window.accessibilityStrings = {
        imageAvailable: 'Image [index] is now available',
        shareSuccess: 'Link copied to clipboard',
        pauseSlideshow: 'Pause slideshow',
        playSlideshow: 'Play slideshow',
        refreshPage: 'Refresh page',
        newWindow: 'Opens in new window',
      };
    </script>
  </body>
</html>
